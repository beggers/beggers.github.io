---
import Tag from '../components/Tag.astro';
import { recentPosts } from '../data/posts.js';

let allPosts = await Astro.glob('../_posts/*.mdx');
const recents = await recentPosts(allPosts);
---

<recentPosts>
  <h2> Recent Posts </h2>
  <ul>
    {
      recents.map(
        ({
          url,
          frontmatter: { title, slug, published, tags }
        }) => (
          <li>
            {published}
            <a href={slug}>{title}</a>
            <ul>
              {
                tags.map((tag) => (
                  <li>
                    <Tag label={tag} />
                  </li>
                ))
              }
            </ul>
          </li>
        )
      )
    }
  </ul>
</recentPosts>
